(()=>{"use strict";const e=function(){const e=function(e,t,n,a,r,c){this.title=e,this.taskDescription=t,this.dueDate=n,this.priority=a,this.notes=r,this.completed=c};return{addNewTask:function(t,n,a,r,c){return new e(t,n,a,r,c,!1)}}}(),t=function(){const e=function(e){this.title=e,this.taskArray=[],this.active=!1};let t={"My Project":{title:"My Project",taskArray:[],active:!0}};return{projects:t,addNewProject:function(n){t.hasOwnProperty(n)?alert("Project already exists."):t[n]=new e(n)},removeProject:function(e){"All Projects"!=e&&delete t[e]},getAllProjectTitles:function(){let e=[];for(const n in t)t.hasOwnProperty(n)&&e.push(t[n].title);return e},setActiveProject:function(e){for(const e in t)t[e].active=!1;t[e].active=!0},getActiveProject:function(){let e=null;for(const n in t)1==t[n].active&&(e=t[n]);return e},removeTask:function(e,n){t[e].taskArray.splice(n,1)},changeTaskPriority:function(e,n){let a,r=t[e].taskArray[n].priority;a="Low"==r?1:"Medium"==r?2:3,a++,4==a&&(a=1),t[e].taskArray[n].priority={1:"Low",2:"Medium",3:"High"}[a]},toggleCompleted:function(e,n){0==t[e].taskArray[n].completed?t[e].taskArray[n].completed=!0:t[e].taskArray[n].completed=!1},synchronizeAllProjects:function(){let e=[];for(const n in t)t[n].taskArray.forEach((t=>{e.push(t)}));return e}}}(),n=function(){localStorage.setItem("localProjects",JSON.stringify(t.projects))},a=function(){let e=JSON.parse(localStorage.getItem("localProjects"));Object.assign(t.projects,e)},r=function(){const e=function(){let e=document.querySelector("#create-project"),r=document.querySelector("#new-project");e.addEventListener("click",(function(){t.addNewProject(r.value),n(),c.clearMenuItems(),c.createMenuItems(),a(),s()}))},a=function(){let e=document.getElementById("navbar-project-list").getElementsByTagName("li");for(let a=0;a<e.length;a++)e[a].addEventListener("click",(function(e){t.projects.hasOwnProperty(e.target.dataset.title)&&(t.setActiveProject(e.target.dataset.title),n(),c.menuItemAddActiveClass(),l.renderSelectedProject())}))},s=function(){let e=document.getElementById("navbar-project-list").getElementsByTagName("i");for(let a=0;a<e.length;a++)e[a].addEventListener("click",(function(e){t.removeProject(e.target.dataset.title),e.target.parentElement.remove(),n()}))},o=function(){document.getElementById("create-task").addEventListener("click",(function(){i.clearMainContents(),i.createFormElements()}))};return{eventHandlerUnhideInputFields:function(){let e=document.querySelector("#h2-create-new-task"),t=document.querySelector("#h2-create-new-project"),n=document.querySelector("#unhide-new-task-div"),a=document.querySelector("#unhide-new-project-div");e.addEventListener("click",(function(e){n.classList.toggle("create-new-div-hidden")})),t.addEventListener("click",(function(e){a.classList.toggle("create-new-div-hidden")}))},eventHandlerCreateNewProject:e,eventHandlerMenuListItems:a,eventHandlerMenuIcons:s,eventHandlerAddNewTask:o,runDynamicEventListeners:function(){e(),a(),s(),o()},eventHandlerAddIconListeners:function(){let e=document.getElementsByClassName("fa-trash");for(let r=0;r<e.length;r++)e[r].addEventListener("click",(function(e){t.removeTask(e.target.dataset.project,e.target.dataset.index),e.target.parentElement.parentElement.parentElement.remove(),c.clearMenuItems(),c.createMenuItems(),a(),s(),n()}));let r=document.getElementsByClassName("fa-check");for(let e=0;e<r.length;e++)r[e].addEventListener("click",(function(e){t.toggleCompleted(e.target.dataset.project,e.target.dataset.index),e.target.parentElement.parentElement.parentElement.classList.contains("main-task-completed")?e.target.parentElement.parentElement.parentElement.classList.toggle("main-task-completed"):e.target.parentElement.parentElement.parentElement.classList.add("main-task-completed"),n()}));let i=document.getElementsByClassName("priority-button");for(let e=0;e<i.length;e++)i[e].addEventListener("click",(function(e){t.changeTaskPriority(e.target.dataset.project,e.target.dataset.index),e.target.parentElement.parentElement.parentElement.getElementsByTagName("div")[3].getElementsByTagName("p")[2].textContent="Priority: "+t.projects[e.target.dataset.project].taskArray[e.target.dataset.index].priority,n()}))},eventHandlerViewAllTasks:function(){document.getElementById("h2-all-tasks").addEventListener("click",(function(){l.clearTargetContents(),l.createHeader("All tasks");for(let e in t.projects)l.createTaskElements(t.projects[e].taskArray);r.eventHandlerAddIconListeners()}))}}}(),c=function(){const e=document.getElementById("navbar-project-list");return{clearMenuItems:function(){for(;e.firstChild;)e.removeChild(e.lastChild)},createMenuItems:function(){t.getAllProjectTitles().forEach((n=>{let a=document.createElement("li");a.dataset.title=n,a.classList.add("list-item");let r=document.createElement("i");r.classList.add("fas"),r.classList.add("fa-times"),r.classList.add("fa-2x"),r.classList.add("remove-icon"),r.dataset.title=n,1==t.projects[n].active&&(a.classList.remove("list-item"),a.classList.add("active-project")),a.textContent=`${n} (${t.projects[n].taskArray.length})`,a.appendChild(r),e.appendChild(a)}))},menuItemAddActiveClass:function(){const n=e.getElementsByTagName("li");for(let e=0;e<n.length;e++){let a=n[e].dataset.title;1==t.projects[a].active?(n[e].classList.add("active-project"),n[e].classList.remove("list-item")):(n[e].classList.remove("active-project"),n[e].classList.add("list-item"))}}}}(),i=function(){const a=document.querySelector("#task-wrapper"),i=function(){let a=function(){let e=[];return["Title","Task description","Due date","Priority","Notes"].forEach((t=>{let n=document.getElementById(t).value;e.push(n)})),e}(),i=e.addNewTask(a[0],a[1],a[2],a[3],a[4],!1),s=t.getActiveProject();null!=s?(s.taskArray.push(i),n(),c.clearMenuItems(),c.createMenuItems(),l.renderSelectedProject(),r.runDynamicEventListeners()):alert("Select a project to add the task to")};return{clearMainContents:function(){for(;a.firstChild;)a.removeChild(a.lastChild)},createFormElements:function(){let e=document.createElement("h2");e.textContent="Create new task",a.appendChild(e);let t=document.createElement("div");t.classList.add("task-pop-up");let n=document.createElement("form");t.appendChild(n),["Title","Task description","Due date","Priority","Notes"].forEach((e=>{if("Priority"!=e){let t=document.createElement("label");t.htmlFor=e,t.textContent=e;let a=document.createElement("input");a.name=e,a.id=e,n.appendChild(t),n.appendChild(a)}else{let t=["Low","Medium","High"],a=document.createElement("label");a.htmlFor=e,a.textContent=e;let r=document.createElement("select");r.id=e,t.forEach((e=>{let t=document.createElement("option");t.value=e,t.textContent=e,r.appendChild(t)})),n.appendChild(a),n.appendChild(r)}}));const r=document.createElement("button");r.addEventListener("click",i),r.textContent="Create new task",t.appendChild(r),a.appendChild(t),document.querySelector("#Title").value=document.querySelector("#new-task").value}}}(),l=function(){const e=document.getElementById("task-wrapper"),n=function(){for(;e.firstChild;)e.removeChild(e.lastChild)},a=function(t){const n=document.createElement("h2");n.textContent=t,e.appendChild(n)},c=function(n){let a=0;n.forEach((n=>{let r=document.createElement("div"),c=document.createElement("div");r.classList.add("main-task"),c.classList.add("main-task-hidden"),c.id=n.title+a.toString(),1==n.completed&&r.classList.add("main-task-completed");const i={title:"Title",taskDescription:"Task description",dueDate:"Due data",priority:"Priority",notes:"Notes"};let l=document.createElement("div");l.classList.add("main-task-header-container");for(let e in i){let t=document.createElement("p");if(t.id="field"+n.title+e+a,t.textContent=`${i[e]}: ${n[e]}`,"title"==e){let e=document.createElement("div");t.dataset.index=a,t.addEventListener("click",(function(e){let t=n.title+e.target.dataset.index;document.getElementById(t).classList.toggle("main-task-hidden")})),t.classList.add("main-task-title"),e.appendChild(t),l.appendChild(e),r.appendChild(l)}else c.appendChild(t)}let s=document.createElement("div"),o=document.createElement("i");o.dataset.index=a,o.dataset.project=t.getActiveProject().title,o.classList.add("fas"),o.classList.add("fa-trash"),o.classList.add("task-icon"),s.appendChild(o);let d=document.createElement("i");d.dataset.index=a,d.dataset.project=t.getActiveProject().title,d.classList.add("fas"),d.classList.add("fa-check"),d.classList.add("task-icon"),s.appendChild(d);let m=document.createElement("button");m.dataset.index=a,m.dataset.project=t.getActiveProject().title,m.classList.add("priority-button"),m.textContent="Change Priority",s.appendChild(m),l.appendChild(s),r.appendChild(c),e.appendChild(r),a++}))};return{renderSelectedProject:function(){let e=t.getActiveProject();n(),a(e.title),c(e.taskArray),r.eventHandlerAddIconListeners()},createHeader:a,clearTargetContents:n,createTaskElements:c}}();window.onload=function(){localStorage.length>0&&a(),c.clearMenuItems(),c.createMenuItems(),r.eventHandlerMenuListItems(),r.eventHandlerUnhideInputFields(),r.eventHandlerMenuIcons(),r.eventHandlerViewAllTasks(),r.runDynamicEventListeners()},t.setActiveProject("My Project"),l.renderSelectedProject()})();